<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: ZMQ::Handler</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/zmq/handler_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/zmq/handler.rb">lib/zmq/handler.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="../Object.html">Object</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-on_error">#on_error</a></li>
          
          <li><a href="#method-i-on_readable">#on_readable</a></li>
          
          <li><a href="#method-i-on_writable">#on_writable</a></li>
          
          <li><a href="#method-i-recv">#recv</a></li>
          
          <li><a href="#method-i-send">#send</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../ZMQ.html">ZMQ</a></li>
        
          <li><a href="../ZMQ/Context.html">ZMQ::Context</a></li>
        
          <li><a href="../ZMQ/DefaultHandler.html">ZMQ::DefaultHandler</a></li>
        
          <li><a href="../ZMQ/DownstreamSocket.html">ZMQ::DownstreamSocket</a></li>
        
          <li><a href="../ZMQ/Error.html">ZMQ::Error</a></li>
        
          <li><a href="../ZMQ/Frame.html">ZMQ::Frame</a></li>
        
          <li><a href="../ZMQ/Handler.html">ZMQ::Handler</a></li>
        
          <li><a href="../ZMQ/Loop.html">ZMQ::Loop</a></li>
        
          <li><a href="../ZMQ/Loop.html">ZMQ::Loop</a></li>
        
          <li><a href="../ZMQ/Message.html">ZMQ::Message</a></li>
        
          <li><a href="../ZMQ/Poller.html">ZMQ::Poller</a></li>
        
          <li><a href="../ZMQ/Pollitem.html">ZMQ::Pollitem</a></li>
        
          <li><a href="../ZMQ/Socket.html">ZMQ::Socket</a></li>
        
          <li><a href="../ZMQ/Socket/Dealer.html">ZMQ::Socket::Dealer</a></li>
        
          <li><a href="../ZMQ/Socket/Pair.html">ZMQ::Socket::Pair</a></li>
        
          <li><a href="../ZMQ/Socket/Pub.html">ZMQ::Socket::Pub</a></li>
        
          <li><a href="../ZMQ/Socket/Pull.html">ZMQ::Socket::Pull</a></li>
        
          <li><a href="../ZMQ/Socket/Push.html">ZMQ::Socket::Push</a></li>
        
          <li><a href="../ZMQ/Socket/Rep.html">ZMQ::Socket::Rep</a></li>
        
          <li><a href="../ZMQ/Socket/Req.html">ZMQ::Socket::Req</a></li>
        
          <li><a href="../ZMQ/Socket/Router.html">ZMQ::Socket::Router</a></li>
        
          <li><a href="../ZMQ/Socket/Sub.html">ZMQ::Socket::Sub</a></li>
        
          <li><a href="../ZMQ/Timer.html">ZMQ::Timer</a></li>
        
          <li><a href="../ZMQ/UpstreamSocket.html">ZMQ::UpstreamSocket</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
          <li><a href="../ZMQ/Loop.html">Object::ZL</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">ZMQ::Handler</h1>

    <div id="description" class="description">
      
    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="pollitem-attribute-method" class="method-detail">
          <a name="pollitem"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">pollitem</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The <a href="Pollitem.html">ZMQ::Pollitem</a> instance wrapped by this
handler.</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(pollitem, *args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>A <a href="Pollitem.html">ZMQ::Pollitem</a> instance is compulsary on init,
with support for optional arguments if a subclasses do require them.</p>

<p>pub = ctx.bind(:PUB, “tcp://127.0.0.1:5000”) # lower level API item =
ZMQ::Pollitem.new(pub) item.handler = <a
href="Handler.html#method-c-new">ZMQ::Handler.new(pub)</a></p>

<p>class ProducerHandler &lt; <a href="Handler.html">ZMQ::Handler</a></p>

<pre>def initialize(item, producer)
  super
  @producer = producer
end

def on_writable
  @producer.work
end</pre>

<p>end</p>

<p><a href="Loop.html#method-c-bind">ZMQ::Loop.bind</a>(:PUB,
"tcp://127.0.0.1:5000", ProducerHandler, producer) # higher level API</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/zmq/handler.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">pollitem</span>, *<span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{pollitem.inspect} is not a valid ZMQ::Pollitem instance&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">ZMQ</span><span class="ruby-operator">::</span><span class="ruby-constant">Pollitem</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">pollitem</span>
  <span class="ruby-ivar">@pollitem</span> = <span class="ruby-identifier">pollitem</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="on_error-method" class="method-detail ">
          <a name="method-i-on_error"></a>

          
          <div class="method-heading">
            <span class="method-name">on_error</span><span
              class="method-args">(exception)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Callback for error conditions such as pollable item errors on poll and
exceptions raised in callbacks. Receives an exception instance as argument
and raises by default.</p>

<p>handler.on_error(err)  =&gt;  raise</p>
            

            
            <div class="method-source-code" id="on_error-source">
<pre>
<span class="ruby-comment"># File lib/zmq/handler.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">on_error</span>(<span class="ruby-identifier">exception</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">exception</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- on_error-source -->
            
          </div>

          

          
        </div><!-- on_error-method -->

      
        <div id="on_readable-method" class="method-detail ">
          <a name="method-i-on_readable"></a>

          
          <div class="method-heading">
            <span class="method-name">on_readable</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Callback invoked from <a href="Loop.html">ZMQ::Loop</a> handlers when the
pollable item is ready for reading. Subclasses are expected to implement
this contract as the default just raises NotImplementedError. It’s
reccommended to read in a non-blocking manner from within this callback.</p>

<p>def <a href="Handler.html#method-i-on_readable">on_readable</a></p>

<pre>msgs &lt;&lt; recv</pre>

<p>end</p>
            

            
            <div class="method-source-code" id="on_readable-source">
<pre>
<span class="ruby-comment"># File lib/zmq/handler.rb, line 39</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">on_readable</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;ZMQ handlers are expected to implement an #on_readable contract&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- on_readable-source -->
            
          </div>

          

          
        </div><!-- on_readable-method -->

      
        <div id="on_writable-method" class="method-detail ">
          <a name="method-i-on_writable"></a>

          
          <div class="method-heading">
            <span class="method-name">on_writable</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Callback invoked from <a href="Loop.html">ZMQ::Loop</a> handlers when the
pollable item is ready for writing. Subclasses are expected to implement
this contract as the default just raises NotImplementedError. It’s
reccommended to write data out as fast as possible from within this
callback.</p>

<p>def <a href="Handler.html#method-i-on_writable">on_writable</a></p>

<pre>send buffer.shift</pre>

<p>end</p>
            

            
            <div class="method-source-code" id="on_writable-source">
<pre>
<span class="ruby-comment"># File lib/zmq/handler.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">on_writable</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;ZMQ handlers are expected to implement an #on_writable contract&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- on_writable-source -->
            
          </div>

          

          
        </div><!-- on_writable-method -->

      
        <div id="recv-method" class="method-detail ">
          <a name="method-i-recv"></a>

          
          <div class="method-heading">
            <span class="method-name">recv</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>API that allows handlers to receive data regardless of the underlying
pollable item type (<a href="Socket.html">ZMQ::Socket</a> or IO).</p>
            

            
            <div class="method-source-code" id="recv-source">
<pre>
<span class="ruby-comment"># File lib/zmq/handler.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">recv</span>
  <span class="ruby-identifier">pollitem</span>.<span class="ruby-identifier">recv</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- recv-source -->
            
          </div>

          

          
        </div><!-- recv-method -->

      
        <div id="send-method" class="method-detail ">
          <a name="method-i-send"></a>

          
          <div class="method-heading">
            <span class="method-name">send</span><span
              class="method-args">(*args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>API that allows handlers to send data regardless of the underlying pollable
item type (<a href="Socket.html">ZMQ::Socket</a> or IO).</p>
            

            
            <div class="method-source-code" id="send-source">
<pre>
<span class="ruby-comment"># File lib/zmq/handler.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">send</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">pollitem</span>.<span class="ruby-identifier">send</span>(*<span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- send-source -->
            
          </div>

          

          
        </div><!-- send-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

